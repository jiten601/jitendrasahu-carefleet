@model IEnumerable<CareFleet.Models.Patient>
@{
    ViewData["Title"] = "Patients";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewBag.ActivePage = "Patients";
    ViewBag.HeaderTitle = "Patients Management";
}

<div class="page-header">
    <h3>All Patients</h3>
    <a href="@Url.Action("Create", "Patient")" class="btn-primary-small">
        <i class="fas fa-plus"></i> Add New Patient
    </a>
</div>

<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Date of Birth</th>
                <th>Gender</th>
                <th>Blood Group</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Any())
            {
                @foreach (var patient in Model)
                {
                    <tr>
                        <td>@patient.FirstName @patient.LastName</td>
                        <td>@patient.Email</td>
                        <td>@patient.PhoneNumber</td>
                        <td>@patient.DateOfBirth.ToString("MM/dd/yyyy")</td>
                        <td>@patient.Gender</td>
                        <td>@patient.BloodGroup</td>
                        <td class="action-buttons">
                            <a href="@Url.Action("Edit", "Patient", new { id = patient.Id })" class="btn-edit" title="Edit">
                                <i class="fas fa-edit"></i>
                            </a>
                            <form asp-action="Delete" asp-controller="Patient" method="post" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this patient?');">
                                <input type="hidden" name="id" value="@patient.Id" />
                                <button type="submit" class="btn-delete" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="7" class="text-center">No patients found. <a href="@Url.Action("Create", "Patient")">Add a new patient</a></td>
                </tr>
            }
        </tbody>
    </table>
</div>

